// Rewritten from https://github.com/ldbc/ldbc_snb_implementations/blob/dev/cypher/queries/interactive-short-2.cypher
FROM GRAPH SNB
MATCH (:Person WHERE id = $personId)<-[:HAS_CREATOR]-(m:Message)-[:REPLY_OF]->{0,1}(p:Post)
MATCH (p)-[:HAS_CREATOR]->(c)
RETURN
  m.id AS messageId,
  CASE // exists(m.content)  /* NOT YET IN GQL DRAFT -> probably similar to SQL and Cypher
//    WHEN true THEN m.content
//    ELSE m.imageFile
  END AS messageContent,
  m.creationDate AS messageCreationDate,
  p.id AS originalPostId,
  c.id AS originalPostAuthorId,
  c.firstName AS originalPostAuthorFirstName,
  c.lastName AS originalPostAuthorLastName
ORDER BY messageCreationDate DESC
LIMIT 10